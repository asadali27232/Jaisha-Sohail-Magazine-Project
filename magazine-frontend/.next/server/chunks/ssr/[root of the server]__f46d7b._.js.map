{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/LENOVO/Desktop/MERN%20Stack%20Project/magazine-frontend/src/app/profile/page.js"],"sourcesContent":["'use client';\r\nimport { useEffect, useState } from 'react';\r\n\r\nconst UserProfile = () => {\r\n    const [user, setUser] = useState(null);\r\n    const [subscriptions, setSubscriptions] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const [newPassword, setNewPassword] = useState('');\r\n    const [passwordResetSuccess, setPasswordResetSuccess] = useState(null);\r\n    const [passwordResetError, setPasswordResetError] = useState(null);\r\n    const [passwordLoading, setPasswordLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const fetchProfile = async () => {\r\n            try {\r\n                const response = await fetch('http://localhost:5000/profile', {\r\n                    method: 'GET',\r\n                    credentials: 'include',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                });\r\n\r\n                if (!response.ok)\r\n                    throw new Error('Not logged in, Login first.');\r\n\r\n                const data = await response.json();\r\n                setUser(data);\r\n            } catch (err) {\r\n                setError(err.message);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        const fetchSubscriptions = async () => {\r\n            try {\r\n                const response = await fetch(\r\n                    'http://localhost:5000/getUserSubscriptions',\r\n                    {\r\n                        method: 'GET',\r\n                        credentials: 'include',\r\n                        headers: { 'Content-Type': 'application/json' },\r\n                    }\r\n                );\r\n\r\n                if (!response.ok)\r\n                    throw new Error('Failed to fetch subscriptions');\r\n\r\n                const data = await response.json();\r\n                console.log(data);\r\n                setSubscriptions(data);\r\n            } catch (err) {\r\n                console.error(err);\r\n            }\r\n        };\r\n\r\n        fetchProfile();\r\n        fetchSubscriptions();\r\n    }, []);\r\n\r\n    const handleResetPassword = async () => {\r\n        setPasswordResetSuccess(null);\r\n        setPasswordResetError(null);\r\n        setPasswordLoading(true);\r\n\r\n        try {\r\n            const response = await fetch(\r\n                'http://localhost:5000/reset-password',\r\n                {\r\n                    method: 'POST',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    credentials: 'include',\r\n                    body: JSON.stringify({ newPassword }),\r\n                }\r\n            );\r\n\r\n            const data = await response.json();\r\n\r\n            if (!response.ok)\r\n                throw new Error(data.message || 'Failed to reset password');\r\n\r\n            setPasswordResetSuccess('Password reset successful!');\r\n            setNewPassword('');\r\n        } catch (err) {\r\n            setPasswordResetError(err.message);\r\n        } finally {\r\n            setPasswordLoading(false);\r\n        }\r\n    };\r\n\r\n    const cancelSubscription = async (subscriptionId) => {\r\n        try {\r\n            const response = await fetch(\r\n                `http://localhost:5000/cancel/${subscriptionId}`,\r\n                {\r\n                    method: 'PUT',\r\n                    credentials: 'include',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                }\r\n            );\r\n\r\n            if (!response.ok) throw new Error('Failed to cancel subscription');\r\n\r\n            // Remove canceled subscription from state\r\n            setSubscriptions(\r\n                subscriptions.filter((sub) => sub._id !== subscriptionId)\r\n            );\r\n        } catch (err) {\r\n            console.error('Error canceling subscription:', err);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex flex-col items-center min-h-screen bg-gray-100 p-4\">\r\n            <div className=\"bg-white shadow-lg rounded-lg p-6 w-full max-w-md text-center\">\r\n                {loading ? (\r\n                    <p className=\"text-gray-500\">Loading...</p>\r\n                ) : error ? (\r\n                    <div>\r\n                        <p className=\"text-red-500\">{error}</p>\r\n                        <button\r\n                            onClick={() => (window.location.href = '/login')}\r\n                            className=\"mt-4 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition\">\r\n                            Login\r\n                        </button>\r\n                    </div>\r\n                ) : (\r\n                    <>\r\n                        <h2 className=\"text-2xl font-semibold mt-4\">\r\n                            {user.name}\r\n                        </h2>\r\n                        <p className=\"text-gray-600\">{user.email}</p>\r\n\r\n                        {/* Reset Password Input */}\r\n                        <div className=\"flex items-center mt-4 border rounded-lg overflow-hidden\">\r\n                            <input\r\n                                type=\"password\"\r\n                                value={newPassword}\r\n                                onChange={(e) => setNewPassword(e.target.value)}\r\n                                placeholder=\"New password\"\r\n                                className=\"flex-1 px-3 py-2 focus:outline-none\"\r\n                            />\r\n                            <button\r\n                                onClick={handleResetPassword}\r\n                                disabled={passwordLoading}\r\n                                className=\"bg-blue-500 text-white px-4 py-2 hover:bg-blue-600 transition\">\r\n                                {passwordLoading ? '...' : 'Reset'}\r\n                            </button>\r\n                        </div>\r\n\r\n                        {passwordResetSuccess && (\r\n                            <p className=\"text-green-500 mt-2\">\r\n                                {passwordResetSuccess}\r\n                            </p>\r\n                        )}\r\n                        {passwordResetError && (\r\n                            <p className=\"text-red-500 mt-2\">\r\n                                {passwordResetError}\r\n                            </p>\r\n                        )}\r\n\r\n                        {/* Subscriptions List */}\r\n                        <div className=\"mt-6 w-full\">\r\n                            <h3 className=\"text-xl font-semibold mb-2\">\r\n                                Your Subscriptions\r\n                            </h3>\r\n                            {subscriptions.length > 0 ? (\r\n                                <div className=\"space-y-4\">\r\n                                    {subscriptions.map((sub) => (\r\n                                        <div\r\n                                            key={sub._id}\r\n                                            className=\"bg-gray-50 p-4 rounded-lg shadow-md text-left\">\r\n                                            <h4 className=\"text-lg font-medium\">\r\n                                                {sub.magazine_id.name}\r\n                                            </h4>\r\n                                            <p className=\"text-gray-600\">\r\n                                                Plan: {sub.plan_id.title}\r\n                                            </p>\r\n                                            <p className=\"text-gray-600\">\r\n                                                Discount:{' '}\r\n                                                {sub.plan_id.discount * 100}%\r\n                                            </p>\r\n                                            <p className=\"text-gray-600\">\r\n                                                Price: ${sub.price.toFixed(2)}\r\n                                            </p>\r\n                                            <p className=\"text-gray-600\">\r\n                                                Renewal Date:{' '}\r\n                                                {new Date(\r\n                                                    sub.renewal_date\r\n                                                ).toLocaleDateString()}\r\n                                            </p>\r\n\r\n                                            {/* Change Subscription Button */}\r\n                                            <button\r\n                                                onClick={() =>\r\n                                                    (window.location.href = `/subscribe?id=${sub.magazine_id._id}`)\r\n                                                }\r\n                                                className=\"mt-2 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition\">\r\n                                                Change Subscription\r\n                                            </button>\r\n\r\n                                            {/* Cancel Subscription Button */}\r\n                                            <button\r\n                                                onClick={() =>\r\n                                                    cancelSubscription(sub._id)\r\n                                                }\r\n                                                className=\"mt-2 px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition\">\r\n                                                Cancel Subscription\r\n                                            </button>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            ) : (\r\n                                <p className=\"text-gray-500\">\r\n                                    You have no active subscriptions.\r\n                                </p>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Logout Button */}\r\n                        <div className=\"mt-6\">\r\n                            <button\r\n                                onClick={() => {\r\n                                    fetch('http://localhost:5000/logout', {\r\n                                        method: 'GET',\r\n                                        credentials: 'include',\r\n                                    })\r\n                                        .then(() => {\r\n                                            localStorage.removeItem('token');\r\n                                            window.location.href = '/login';\r\n                                        })\r\n                                        .catch((err) => console.error(err));\r\n                                }}\r\n                                className=\"mt-4 px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition\">\r\n                                Logout\r\n                            </button>\r\n                        </div>\r\n                    </>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default UserProfile;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 362, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 372, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/LENOVO/Desktop/MERN%20Stack%20Project/magazine-frontend/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n    } else if (process.env.TURBOPACK) {\n      module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n    } else {\n      module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n    } else if (process.env.TURBOPACK) {\n      module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n    } else {\n      module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":";AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,MAAQ;;AAEzC,OAAO;IACL,IAAIF,QAAQC,GAAG,CAACK,uBAA2B,EAAF;;IAQzC,OAAO;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1CJ,OAAOC,OAAO,GAAGC,QAAQ;QAC3B,OAAO,IAAIL,QAAQC,GAAG,CAACO,SAAS,EAAE;;QAIlC;IACF;AACF","ignoreList":[0]}},
    {"offset": {"line": 386, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 391, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/LENOVO/Desktop/MERN%20Stack%20Project/magazine-frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = require('../../module.compiled').vendored[\n  'react-ssr'\n].ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":";AAAAA,OAAOC,OAAO,GAAGC,QAAQ,0HAAyBC,QAAQ,CACxD,YACD,CAACC,kBAAkB","ignoreList":[0]}},
    {"offset": {"line": 393, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 398, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/LENOVO/Desktop/MERN%20Stack%20Project/magazine-frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = require('../../module.compiled').vendored['react-ssr'].React\n"],"names":["module","exports","require","vendored","React"],"mappings":";AAAAA,OAAOC,OAAO,GAAGC,QAAQ,0HAAyBC,QAAQ,CAAC,YAAY,CAACC,KAAK","ignoreList":[0]}},
    {"offset": {"line": 400, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}